# 第六章-类文件结构

#### 6.1 概述

#### 6.2  无关性基石

JVM虚拟机只与Class文件这种特定的二进制文件相关联

#### 6.3  Class文件的结构

- Class文件采用类似于C语言的为结构来存储数据，这种伪结构中只有两种数据类型：无符号数和表。

  ​	**无符号数：**基本的数据类型，以u1，u2，u4，u8来代表1个字节，2个字节，四个字节和八个字节的无符号数。无符号数可以用来描述数字，索引引用，数据量或者按照UTF-8编码的字符串值。

  ​	**表：**多个无符号数或者其它表作为数据项构成的符合数据类型，所有表的习惯的以“_info”结尾。表用于描述有层次关系的复合结构的数据。整个CLass文件本质就是一张表。

  ![table6-1](C:\Xingwei\Owner\Typora\Typora\Notebook\JavaVirtualMachine\images\table6-1.png)

- **Class文件结构**

  - **魔数：**每个Class文件的头四个字节称为魔数。它的唯一作用是确定这个文件是否为一个可以被虚拟机接受的Class文件。Class文件的魔数值为0xCAFEBABE（咖啡宝贝）。

  - **版本号：**紧接着魔数的四个字节存储的是版本号。第五和第六个字节是次版本号，第七和第八个字节是主版本号。
  - **常量池：**常量池可以理解为Class文件之中的资源仓库。容量计数从1开始，eg：0x0016即十进制的22，代表常量池中有21项常量，索引值范围为1~21。0代表‘不引用任何一个常量池’。
    - 常量池包含字面量和符号引用。
      - 字面量：文本字符串，声明为final的常量值。
      - 符号引用：类和接口的全限定名，字段的名称和描述符，方法的名称和描述符。
  - javap可以分析Class文件字节码。命令：java -verbose testClass





















































